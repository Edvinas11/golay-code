#ifndef GOLAY_H
#define GOLAY_H

class Golay {
private:
    int I[12][12] = {
        {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    };
    int B[12][11] = {
        {1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0},
        {1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1},
        {0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1},
        {1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 0},
        {1, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1},
        {1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1},
        {0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1},
        {0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0},
        {0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 0},
        {1, 0, 1, 1, 0, 1, 1, 1, 0, 0, 0},
        {0, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1},
        {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1}
    };
    int G[12][23];
    int H[24][12] = {
        {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
        {1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1},
        {1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1},
        {0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 1},
        {1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1},
        {1, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1},
        {1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1},
        {0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1},
        {0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1},
        {0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1},
        {1, 0, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1},
        {0, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1},
        {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0}
    };
    // int received[23] = {0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0};
    int f_received[24];
    int syndrome[12] = {0};

    void create_generator_matrix();
    void get_syndrome();
    void form_received(int* received_message);
    int bin_add(int a, int b);
    int bin_mult(int a, int b);
    int get_weight(int *v, int size);

public:
    Golay();
    void print_generator_matrix();
    void print_parity_check_matrix();
    int* encode(int* message);
    void print_encoded_message(const int* encoded_message);
    void send_through_channel(double p, const int* encoded_message, int* received_message, bool protect_last_bits);
    void edit_received_message(int* received_message);
    void decode(int* received_message, int* decoded_message);
    void get_message_input(int *message);
    double get_input_probability();
};

#endif